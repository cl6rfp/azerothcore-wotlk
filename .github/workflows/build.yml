name: Build AzerothCore with Boost 1.78

on:
  push:
    branches:
      - main  # o la rama que estés usando
  pull_request:
    branches:
      - main  # o la rama que estés usando

jobs:
  build:
    runs-on: ubuntu-latest  # O windows-latest si estás en Windows

    steps:
      # Paso para hacer checkout del código del repositorio
      - name: Checkout the repository
        uses: actions/checkout@v2

      # Paso para clonar el repositorio de Boost y preparar la versión 1.78
      - name: Clonar Boost y preparar
        run: |
          # Clonamos Boost desde su repositorio oficial
          git clone --branch boost-1.78.0 https://github.com/boostorg/boost.git

          # Entramos a la carpeta de Boost
          cd boost

          # Ejecutamos el bootstrap para preparar Boost
          ./bootstrap.sh

          # Esto instalará Boost en el directorio de Boost
          ./b2 install --prefix=${{ github.workspace }}/boost_1_78_0

          # Establecemos la variable de entorno BOOST_ROOT para apuntar a la instalación
          echo "BOOST_ROOT=${{ github.workspace }}/boost_1_78_0" >> $GITHUB_ENV

      # Paso para ejecutar CMake usando Boost
      - name: Configurar CMake
        run: |
          cmake -S . -B build -DWITH_ELUNA=ON -DCMAKE_BUILD_TYPE=MinSizeRel -DBOOST_ROOT=${{ env.BOOST_ROOT }}
          
      # Paso para compilar el código
      - name: Build
        run: |
          cmake --build build --config Release
